\section{Experimental results}\label{sec:experimental}

The initial environment is

\[
    \Gamma = \{ nil = \cons{nil}(),\ one = \cons{1}() \}
\]

\newcommand{\retTrue}{\matchreturn{\textsf{True}}}
\newcommand{\retFalse}{\matchreturn{\textsf{False}}}
\newcommand{\isShortBody}{\matchalt{\matchpat{(x : y : ys)}{\retFalse}}{\matchpat{ys}{\retTrue}}}
\newcommand{\isShortPMC}{\ensuremath{\isShort}}
\newcommand{\isShort}{\textsf{isShort}}
% \newcommand{\listOne}{\textsf{cons}(one,nil)}
\newcommand{\listOne}{(one : nil)}
\newcommand{\single}{\abstr{(\matchpat{x}{\matchreturn{(x : nil)}})}}
\newcommand{\retSingle}{\matchreturn{(x : nil)}}
\newcommand{\matchNilList}{\matcharg{nil}{\matchpat{(y : ys)}{\retFalse}}}

% \begin{figure*}
%     \[
%         \begin{array}{llll}
%             \hline
%             \text{Heap} & \text{Control}                                    & \text{RetStack}                                   & \text{Rule}            \\
%             \hline
%             \Gamma      & \eval{\llet{xs = \listOne}{\app{\isShort}{xs}}}   & []                                                & (\smallrule{Let})      \\
%             \Gamma \cup \{(l_1\mapsto\listOne)\}
%                         & \eval{\app{\isShort}{l_1}}                        & []                                                & (\smallrule{App1})     \\
%             \Gamma      & \eval{\isShort}                                   & [l_1]                                             & (\smallrule{App2})     \\
%             \Gamma      & \eval{\abstr{\matcharg{l_1}{\isShortBody}}}       & []                                                & (\smallrule{Sat})      \\
%             \Gamma      & \match{[]}{\matcharg{l_1}{\isShortBody}}          & [\$]                                              & (\smallrule{Arg})      \\
%             \Gamma      & \match{[l_1]}{\isShortBody}                       & [\$]                                              & (\smallrule{Alt1})     \\
%             \Gamma      & \match{[l_1]}{\matchpat{(x : y : ys)}{\retFalse}} & [?([l_1],\matchpat{ys}{\retTrue}),~\dots]         & (\smallrule{Cons1})    \\
%             \Gamma      & \eval{l_1}                                        & [@([],\matchpat{(x : y : ys)}{\retFalse}),~\dots] & (\smallrule{Var})      \\
%             \Gamma      & \eval{\listOne}                                   & [@([],\matchpat{(x : y : ys)}{\retFalse}),~\dots] & (\smallrule{Cons2})    \\
%             \Gamma      & \match{[]}{\matchfail}                            & [?([l_1],\matchpat{ys}{\retTrue}),~\dots]         & (\smallrule{Fail})     \\
%             \Gamma      & \match{[l_1]}{\matchpat{ys}{\retTrue}}            & [\$]                                              & (\smallrule{Alt2})     \\
%             \Gamma      & \match{[]}{\retTrue}                              & [\$]                                              & (\smallrule{Return1B}) \\
%             \Gamma      & \eval{\textsf{True}}                              & []                                                & \text{Success}         \\
%         \end{array}
%     \]
%     \caption{Example application of \textsf{isShort} to a list with a single element}\label{ex:isShort}
% \end{figure*}

\begin{figure*}
    \[
        \begin{array}{llll}
            \hline
            \text{Heap} & \text{Control}                                            & \text{RetStack}                                   & \text{rule}            \\
            \hline
            \Gamma      & \eval{\llet{xs = \app{\single}{one}}{\app{\isShort}{xs}}} & []                                                & (\smallrule{Let})      \\
            \Gamma ,~ l_1 \mapsto \app{\single}{one}
                        & \eval{\app{\isShort}{l_1}}                                & []                                                & (\smallrule{App1})     \\
            \Gamma      & \eval{\isShort}                                           & [l_1]                                             & (\smallrule{App2})     \\
            \Gamma      & \eval{\abstr{(\matcharg{l_1}{\isShortBody}})}             & []                                                & (\smallrule{Sat})      \\
            \Gamma      & \match{[]}{\matcharg{l_1}{\isShortBody}}                  & [\$]                                              & (\smallrule{Arg})      \\
            \Gamma      & \match{[l_1]}{\isShortBody}                               & [\$]                                              & (\smallrule{Alt1})     \\
            \Gamma      & \match{[l_1]}{\matchpat{(x : y : ys)}{\retFalse}}         & [?([l_1],\matchpat{ys}{\retTrue}),~\dots]         & (\smallrule{Cons1})    \\
            \Gamma      & \eval{l_1}                                                & [@([],\matchpat{(x : y : ys)}{\retFalse}),~\dots] & (\smallrule{Var})      \\
            \Gamma      & \eval{\app{\single}{one}}                                 & [!l_1,~\dots]                                     & (\smallrule{App1})     \\
            \Gamma      & \eval{\single}                                            & [one,~\dots]                                      & (\smallrule{App2})     \\
            \Gamma      & \eval{\abstr{(\matcharg{one}{\matchpat{x}{\retSingle}})}} & [!l_1,~\dots]                                     & (\smallrule{Sat})      \\
            \Gamma      & \match{[]}{\matcharg{one}{\matchpat{x}{\retSingle}}}      & [\$,~\dots]                                       & (\smallrule{Arg})      \\
            \Gamma      & \match{[one]}{\matchpat{x}{\retSingle}}                   & [\$,~\dots]                                       & (\smallrule{Bind})     \\
            \Gamma      & \match{[]}{\matchreturn{(one : nil)}}                     & [\$,~\dots]                                       & (\smallrule{Return1B}) \\
            \Gamma      & \eval{(one : nil)}                                        & [!l_1,~\dots]                                     & (\smallrule{Update})   \\
            \Gamma ,~ l_1\mapsto(one : nil)
                        & \eval{(one : nil)}                                        & [@([],\matchpat{(x : y : ys)}{\retFalse}),~\dots] & (\smallrule{Cons2})    \\
            \Gamma      & \match{[]}{\matcharg{one}{\matchpat{x}{\matchNilList}}}
                        & [?([l_1],\matchpat{ys}{\retTrue}),~\dots]                 & (\smallrule{Arg})                                                          \\
            \Gamma      & \match{[one]}{\matchpat{x}{\matchNilList}}
                        & [?([l_1],\matchpat{ys}{\retTrue}),~\dots]                 & (\smallrule{Bind})                                                         \\
            \Gamma      & \match{[]}{\matchNilList}
                        & [?([l_1],\matchpat{ys}{\retTrue}),~\dots]                 & (\smallrule{Arg})                                                          \\
            \Gamma      & \match{[nil]}{\matchpat{(y : ys)}{\retFalse}}             & [?([l_1],\matchpat{ys}{\retTrue}),~\dots]         & (\smallrule{Cons1})    \\
            \Gamma      & \eval{nil}                                                & [@([],\matchpat{(y : ys)}{\retFalse}),~\dots]     & (\smallrule{Var})      \\
            \Gamma      & \eval{\textsf{nil}}                                       & [!nil,~\dots]                                     & (\smallrule{Update})   \\
            \Gamma      & \eval{\textsf{nil}}                                       & [@([],\matchpat{(y : ys)}{\retFalse}),~\dots]     & (\smallrule{Fail})     \\
            \Gamma      & \match{[]}{\matchfail}                                    & [?([l_1],\matchpat{ys}{\retTrue}),~\dots]         & (\smallrule{Alt2})     \\
            \Gamma      & \match{[l_1]}{\matchpat{ys}{\retTrue}}                    & [\$]                                              & (\smallrule{Bind})     \\
            \Gamma      & \match{[]}{\retTrue}                                      & [\$]                                              & (\smallrule{Retun1B})  \\
            \Gamma      & \eval{\textsf{True}}                                      & []                                                & \text{Success}         \\
        \end{array}
    \]
    \caption{Example application of \textsf{isShort} to a list with a single element}\label{ex:isShort}
\end{figure*}